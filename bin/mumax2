#! /bin/bash

# This is a wrapper script for the mumax2 binary.

ARGV="$@"

# 1) set up environment
MUMAX2BIN=$(dirname $(readlink -f $0)) # path to this script
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$MUMAX2BIN/../src/libmumax2
#echo LD_LIBRARY_PATH: $LD_LIBRARY_PATH
export PYTHONPATH=$PYTHONPATH:$MUMAX2BIN/../src/python
#echo PYTHONPATH: $PYTHONPATH
set `uname`
if [ "$1" == "Darwin" ]
then
	export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/usr/local/cuda/lib:$MUMAX2BIN/../src/libmumax2
fi

# 2) run mumax
exec $MUMAX2BIN/../src/mumax2/mumax2 $ARGV
